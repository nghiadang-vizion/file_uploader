{"ast":null,"code":"var Stream = require('stream');\nvar Parse = require('./parse');\nvar duplexer2 = require('duplexer2');\nvar BufferStream = require('./BufferStream');\n\n// Backwards compatibility for node versions < 8\nif (!Stream.Writable || !Stream.Writable.prototype.destroy) Stream = require('readable-stream');\nfunction parseOne(match, opts) {\n  var inStream = Stream.PassThrough({\n    objectMode: true\n  });\n  var outStream = Stream.PassThrough();\n  var transform = Stream.Transform({\n    objectMode: true\n  });\n  var re = match instanceof RegExp ? match : match && new RegExp(match);\n  var found;\n  transform._transform = function (entry, e, cb) {\n    if (found || re && !re.exec(entry.path)) {\n      entry.autodrain();\n      return cb();\n    } else {\n      found = true;\n      out.emit('entry', entry);\n      entry.on('error', function (e) {\n        outStream.emit('error', e);\n      });\n      entry.pipe(outStream).on('error', function (err) {\n        cb(err);\n      }).on('finish', function (d) {\n        cb(null, d);\n      });\n    }\n  };\n  inStream.pipe(Parse(opts)).on('error', function (err) {\n    outStream.emit('error', err);\n  }).pipe(transform).on('error', Object) // Silence error as its already addressed in transform\n  .on('finish', function () {\n    if (!found) outStream.emit('error', new Error('PATTERN_NOT_FOUND'));else outStream.end();\n  });\n  var out = duplexer2(inStream, outStream);\n  out.buffer = function () {\n    return BufferStream(outStream);\n  };\n  return out;\n}\nmodule.exports = parseOne;","map":{"version":3,"names":["Stream","require","Parse","duplexer2","BufferStream","Writable","prototype","destroy","parseOne","match","opts","inStream","PassThrough","objectMode","outStream","transform","Transform","re","RegExp","found","_transform","entry","e","cb","exec","path","autodrain","out","emit","on","pipe","err","d","Object","Error","end","buffer","module","exports"],"sources":["/Users/dangnghia/Documents/vizion/file-uploader/client/node_modules/unzipper/lib/parseOne.js"],"sourcesContent":["var Stream = require('stream');\nvar Parse = require('./parse');\nvar duplexer2 = require('duplexer2');\nvar BufferStream = require('./BufferStream');\n\n// Backwards compatibility for node versions < 8\nif (!Stream.Writable || !Stream.Writable.prototype.destroy)\n  Stream = require('readable-stream');\n\nfunction parseOne(match,opts) {\n  var inStream = Stream.PassThrough({objectMode:true});\n  var outStream = Stream.PassThrough();\n  var transform = Stream.Transform({objectMode:true});\n  var re = match instanceof RegExp ? match : (match && new RegExp(match));\n  var found;\n\n  transform._transform = function(entry,e,cb) {\n    if (found || (re && !re.exec(entry.path))) {\n      entry.autodrain();\n      return cb();\n    } else {\n      found = true;\n      out.emit('entry',entry);\n      entry.on('error',function(e) {\n        outStream.emit('error',e);\n      });\n      entry.pipe(outStream)\n        .on('error',function(err) {\n          cb(err);\n        })\n        .on('finish',function(d) {\n          cb(null,d);\n        });\n    }\n  };\n\n  inStream.pipe(Parse(opts))\n    .on('error',function(err) {\n      outStream.emit('error',err);\n    })\n    .pipe(transform)\n    .on('error',Object)  // Silence error as its already addressed in transform\n    .on('finish',function() {\n      if (!found)\n        outStream.emit('error',new Error('PATTERN_NOT_FOUND'));\n      else\n        outStream.end();\n    });\n\n  var out = duplexer2(inStream,outStream);\n  out.buffer = function() {\n    return BufferStream(outStream);\n  };\n\n  return out;\n}\n\nmodule.exports = parseOne;\n"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC9B,IAAIC,KAAK,GAAGD,OAAO,CAAC,SAAS,CAAC;AAC9B,IAAIE,SAAS,GAAGF,OAAO,CAAC,WAAW,CAAC;AACpC,IAAIG,YAAY,GAAGH,OAAO,CAAC,gBAAgB,CAAC;;AAE5C;AACA,IAAI,CAACD,MAAM,CAACK,QAAQ,IAAI,CAACL,MAAM,CAACK,QAAQ,CAACC,SAAS,CAACC,OAAO,EACxDP,MAAM,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAErC,SAASO,QAAQA,CAACC,KAAK,EAACC,IAAI,EAAE;EAC5B,IAAIC,QAAQ,GAAGX,MAAM,CAACY,WAAW,CAAC;IAACC,UAAU,EAAC;EAAI,CAAC,CAAC;EACpD,IAAIC,SAAS,GAAGd,MAAM,CAACY,WAAW,CAAC,CAAC;EACpC,IAAIG,SAAS,GAAGf,MAAM,CAACgB,SAAS,CAAC;IAACH,UAAU,EAAC;EAAI,CAAC,CAAC;EACnD,IAAII,EAAE,GAAGR,KAAK,YAAYS,MAAM,GAAGT,KAAK,GAAIA,KAAK,IAAI,IAAIS,MAAM,CAACT,KAAK,CAAE;EACvE,IAAIU,KAAK;EAETJ,SAAS,CAACK,UAAU,GAAG,UAASC,KAAK,EAACC,CAAC,EAACC,EAAE,EAAE;IAC1C,IAAIJ,KAAK,IAAKF,EAAE,IAAI,CAACA,EAAE,CAACO,IAAI,CAACH,KAAK,CAACI,IAAI,CAAE,EAAE;MACzCJ,KAAK,CAACK,SAAS,CAAC,CAAC;MACjB,OAAOH,EAAE,CAAC,CAAC;IACb,CAAC,MAAM;MACLJ,KAAK,GAAG,IAAI;MACZQ,GAAG,CAACC,IAAI,CAAC,OAAO,EAACP,KAAK,CAAC;MACvBA,KAAK,CAACQ,EAAE,CAAC,OAAO,EAAC,UAASP,CAAC,EAAE;QAC3BR,SAAS,CAACc,IAAI,CAAC,OAAO,EAACN,CAAC,CAAC;MAC3B,CAAC,CAAC;MACFD,KAAK,CAACS,IAAI,CAAChB,SAAS,CAAC,CAClBe,EAAE,CAAC,OAAO,EAAC,UAASE,GAAG,EAAE;QACxBR,EAAE,CAACQ,GAAG,CAAC;MACT,CAAC,CAAC,CACDF,EAAE,CAAC,QAAQ,EAAC,UAASG,CAAC,EAAE;QACvBT,EAAE,CAAC,IAAI,EAACS,CAAC,CAAC;MACZ,CAAC,CAAC;IACN;EACF,CAAC;EAEDrB,QAAQ,CAACmB,IAAI,CAAC5B,KAAK,CAACQ,IAAI,CAAC,CAAC,CACvBmB,EAAE,CAAC,OAAO,EAAC,UAASE,GAAG,EAAE;IACxBjB,SAAS,CAACc,IAAI,CAAC,OAAO,EAACG,GAAG,CAAC;EAC7B,CAAC,CAAC,CACDD,IAAI,CAACf,SAAS,CAAC,CACfc,EAAE,CAAC,OAAO,EAACI,MAAM,CAAC,CAAE;EAAA,CACpBJ,EAAE,CAAC,QAAQ,EAAC,YAAW;IACtB,IAAI,CAACV,KAAK,EACRL,SAAS,CAACc,IAAI,CAAC,OAAO,EAAC,IAAIM,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAEvDpB,SAAS,CAACqB,GAAG,CAAC,CAAC;EACnB,CAAC,CAAC;EAEJ,IAAIR,GAAG,GAAGxB,SAAS,CAACQ,QAAQ,EAACG,SAAS,CAAC;EACvCa,GAAG,CAACS,MAAM,GAAG,YAAW;IACtB,OAAOhC,YAAY,CAACU,SAAS,CAAC;EAChC,CAAC;EAED,OAAOa,GAAG;AACZ;AAEAU,MAAM,CAACC,OAAO,GAAG9B,QAAQ"},"metadata":{},"sourceType":"script","externalDependencies":[]}